<!DOCTYPE html>
<html>
<head>
  <title>Vendor Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

<h3 id="dashboardTitle">Vendor Dashboard</h3>
<button class="btn btn-danger btn-sm float-end" onclick="logout()">Logout</button>

<!-- Navigation tabs -->
<ul class="nav nav-tabs mb-3">
  <li class="nav-item"><a class="nav-link active" href="#" onclick="showSection('chatbots')">Chatbots</a></li>
  <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('documents')">Documents</a></li>
  <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('chat')">Chat</a></li>
</ul>

<!-- Sections -->
<div id="chatbotsSection">
  <h5>Chatbots</h5>
  <ul class="list-group" id="chatbotList"></ul>
  <button class="btn btn-primary mt-2" onclick="showAddChatbotModal()">Add Chatbot</button>
</div>

<div id="documentsSection" class="d-none">
  <h5>Documents (All)</h5>
  <ul class="list-group mb-2" id="documentList"></ul>
</div>

<div id="chatSection" class="d-none">
  <h5>Live Chat</h5>
  <div id="chatWindow" style="height:300px; overflow:auto; border:1px solid #ccc; padding:10px;"></div>
  <select id="chatbotSelect" class="form-select mb-2"></select>
  <input id="chatInput" class="form-control mb-2" placeholder="Type your message">
  <button class="btn btn-success" onclick="sendChat()">Send</button>
</div>

<!-- Chatbot Modal (with Document Upload) -->
<div class="modal fade" id="chatbotModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content p-3">
      <h5>Add / Edit Chatbot</h5>
      <input type="hidden" id="chatbotId">

      <!-- Chatbot Fields -->
      <input id="chatbotName" class="form-control mb-2" placeholder="Chatbot Name">
      <textarea id="chatbotDescription" class="form-control mb-2" placeholder="Description"></textarea>
      <textarea id="systemPrompt" class="form-control mb-2" placeholder="System Prompt"></textarea>
      <select id="llmSelect" class="form-select mb-2"></select>
      <input id="llmPath" class="form-control mb-2" placeholder="LLM Path" readonly>
      <select id="mode" class="form-select mb-2">
        <option value="private">Private</option>
        <option value="public">Public</option>
      </select>
      <div class="form-check mb-2">
        <input id="isActive" type="checkbox" class="form-check-input" checked>
        <label class="form-check-label">Active</label>
      </div>

      <hr>
      <h6>Attach Documents</h6>
      <input type="file" id="docFile" class="form-control mb-2" multiple>
      <!-- Container to show all selected files -->
      <div id="selectedFiles" style="max-height:150px; overflow-y:auto; border:1px solid #ccc; padding:5px;"></div>


      <!-- Existing documents loaded from server -->
      <div id="existingDocs" class="mb-2"></div>

      <button class="btn btn-primary float-end" onclick="saveChatbotWithDocument()">Save Chatbot</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="dashboard.js"></script>
</body>
</html>
