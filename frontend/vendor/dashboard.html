<!DOCTYPE html>
<html>
<head>
  <title>Vendor Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Vendor Dashboard</h3>
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
      Profile
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="#" onclick="showProfileForm()">Update Profile</a></li>
      <li><a class="dropdown-item" href="#" onclick="logout()">Logout</a></li>
    </ul>
  </div>
</div>

<div class="row">
  <!-- Sidebar -->
  <div class="col-md-2">
    <ul class="list-group">
      <li class="list-group-item list-group-item-action" onclick="loadChatbots()">Chatbots</li>
      <li class="list-group-item list-group-item-action" onclick="loadDocuments()">Documents</li>
      <li class="list-group-item list-group-item-action" onclick="showAnalyticsSection()">Analytics</li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="col-md-10">
    <!-- Chatbots Section -->
    <div id="chatbotsSection" class="d-none">
      <div class="d-flex">
        <ul id="chatbotList" class="list-group w-75 me-3"></ul>
        <div class="d-flex align-items-start">
          <button class="btn btn-primary" onclick="showAddChatbotModal()">Add Chatbot</button>
        </div>
      </div>
    </div>

    <!-- Documents Section -->
    <div id="documentsSection" class="d-none">
      <ul id="documentList" class="list-group"></ul>
    </div>

    <!-- Profile Section -->
    <div id="profileSection" class="d-none">
      <h4>Update Profile</h4>
      <div class="mb-2">
        <label>Name</label>
        <input type="text" id="vendorName" class="form-control">
      </div>
      <div class="mb-2">
        <label>Email</label>
        <input type="email" id="vendorEmail" class="form-control">
      </div>
      <button class="btn btn-success" onclick="saveProfile()">Save</button>
    </div>

    <!-- Analytics Section -->
    <div id="analyticsSection" class="d-none">
      <h4>Vendor Analytics</h4>
      <div class="mb-3">
        <label for="analyticsUserSelect">Select User (optional)</label>
        <select id="analyticsUserSelect" class="form-select">
          <option value="">All Users</option>
        </select>
      </div>
      <div id="analyticsList"></div>
    </div>
  </div>
</div>

<!-- Chatbot Modal -->
<div class="modal fade" id="chatbotModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Chatbot</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="chatbotId">
        <div class="mb-2">
          <label>Name</label>
          <input type="text" id="chatbotName" class="form-control">
        </div>
        <div class="mb-2">
          <label>Description</label>
          <textarea id="chatbotDescription" class="form-control"></textarea>
        </div>
        <div class="mb-2">
          <label>System Prompt</label>
          <textarea id="systemPrompt" class="form-control"></textarea>
        </div>
        <div class="mb-2">
          <label>LLM</label>
          <select id="llmSelect" class="form-select"></select>
          <input type="hidden" id="llmPath">
        </div>
        <div class="mb-2">
          <label>Mode</label>
          <select id="mode" class="form-select">
            <option value="private">Private</option>
            <option value="public">Public</option>
          </select>
        </div>
        <div class="form-check mb-2">
          <input type="checkbox" id="isActive" class="form-check-input" checked>
          <label class="form-check-label">Active</label>
        </div>
        <div class="mb-2">
          <label>Vector Store Type</label>
          <select id="vectorStoreType" class="form-select">
            <option value="chroma">Chroma</option>
            <option value="pinecone">Pinecone</option>
            <option value="qdrant">Qdrant</option>
            <option value="weaviate">Weaviate</option>
            <option value="pgvector">PGVector</option>
          </select>
        </div>
        <div class="mb-2">
          <label>Vector Store Config</label>
          <textarea id="vectorStoreConfig" class="form-control"></textarea>
        </div>
        <div class="mb-2">
          <label>Upload Documents</label>
          <input type="file" id="docFile" multiple class="form-control">
          <div id="selectedFiles" class="mt-2"></div>
          <div id="existingDocs" class="mt-2"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="saveChatbotBtn">Save</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="dashboard.js"></script>
</body>
</html>
